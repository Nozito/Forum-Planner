{% extends 'base.html.twig' %}

{% block title %}Stand{% endblock %}

{% block body %}
    <div class="container mx-auto p-6">
        <h1 class="text-3xl font-semibold mb-6">Stand</h1>

        <div class="overflow-x-auto">
            <table class="min-w-full bg-white shadow-md rounded-lg">
                <tbody>
                <tr class="border-b">
                    <th class="py-3 px-6 text-left font-medium text-gray-600">Id</th>
                    <td class="py-3 px-6">{{ stand.id }}</td>
                </tr>
                <tr class="border-b">
                    <th class="py-3 px-6 text-left font-medium text-gray-600">Title</th>
                    <td class="py-3 px-6">{{ stand.title }}</td>
                </tr>
                <tr class="border-b">
                    <th class="py-3 px-6 text-left font-medium text-gray-600">Picture</th>
                    <td class="py-3 px-6">
                        {% if stand.picture %}
                            <img src="{{ asset('uploads/images/' ~ stand.picture) }}" alt="Stand Image"
                                 class="h-32 rounded-lg">
                        {% else %}
                            <span class="text-gray-500">No picture available</span>
                        {% endif %}
                    </td>
                </tr>
                <tr class="border-b">
                    <th class="py-3 px-6 text-left font-medium text-gray-600">Description</th>
                    <td class="py-3 px-6">{{ stand.description }}</td>
                </tr>
                <tr class="border-b">
                    <th class="py-3 px-6 text-left font-medium text-gray-600">Capacity</th>
                    <td class="py-3 px-6">{{ stand.capacity }}</td>
                </tr>
                <tr class="border-b">
                    <th class="py-3 px-6 text-left font-medium text-gray-600">Duration</th>
                    <td class="py-3 px-6">{{ stand.duration ? stand.duration|date('H:i:s') : '' }}</td>
                </tr>
                <tr class="border-b">
                    <th class="py-3 px-6 text-left font-medium text-gray-600">Note Moyenne</th>
                    <td class="py-3 px-6">{{ stand.getAverageRating() }}/5</td>
                </tr>
                <tr class="border-b">
                    <th class="py-3 px-6 text-left font-medium text-gray-600">Notes</th>
                    <td class="py-3 px-6">
                        <ul>
                            <div class="card p-4 bg-white shadow-md rounded-lg">
                                <h1 class="text-2xl font-bold mb-4">Notes et commentaires pour le stand "{{ stand.title }}"</h1>

                                {% if stand.notes is not empty %}
                                    <ul>
                                        {% for note in stand.notes %}
                                            <li>
                                                <strong>Note:</strong>
                                                <div class="rating mb-4 flex items-center">
                                                    {% for i in 1..5 %}
                                                        <input
                                                                type="radio"
                                                                id="star{{ i }}"
                                                                name="rating"
                                                                value="{{ i }}"
                                                                class="hidden peer"
                                                                {{ note.note == i ? 'checked' : '' }}
                                                                aria-label="Star {{ i }}"
                                                                required
                                                        >
                                                        <label
                                                                for="star{{ i }}"
                                                                class="cursor-pointer"
                                                                aria-labelledby="star{{ i }}"
                                                        >
                                                            <svg xmlns="http://www.w3.org/2000/svg"
                                                                 viewBox="0 0 24 24"
                                                                 class="w-8 h-8 {{ note.note >= i ? 'fill-yellow-500' : 'fill-gray-300' }}">
                                                                <path d="M12,17.27L18.18,21L16.54,13.97L22,9.24L14.81,8.62L12,2L9.19,8.62L2,9.24L7.45,13.97L5.82,21L12,17.27Z"></path>
                                                            </svg>
                                                        </label>
                                                    {% endfor %}
                                                </div>

                                                <br>
                                                <strong>Commentaire:</strong> {{ note.commentaire }}
                                            </li>
                                        {% endfor %}
                                    </ul>
                                {% else %}
                                    <p>Aucune note ou commentaire pour ce stand.</p>
                                {% endif %}
                            </div>
                        </ul>
                </tbody>
            </table>
        </div>

        <div class="mt-6 flex space-x-4">
            <a href="{{ path('app_note_stand_new', {'id': stand.id}) }}" class="text-blue-500 hover:text-blue-700">
                Noter le stand
            </a>
            <a href="{{ path('app_stand') }}" class="text-blue-500 hover:text-blue-700">Back to list</a>
            <a href="{{ path('app_stand_edit', {'id': stand.id}) }}"
               class="text-green-500 hover:text-green-700">Edit</a>
            {{ include('stand/_delete_form.html.twig') }}
        </div>
    </div>
{% endblock %}