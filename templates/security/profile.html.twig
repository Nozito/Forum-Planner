{# templates/profile/profile.html.twig #}
{% extends 'base.html.twig' %}

{% block title %}Mon Profil{% endblock %}

{% block body %}
<h1>Mon Profil</h1>

{% for message in app.flashes('success') %}
    <div class="alert alert-success">{{ message }}</div>
{% endfor %}

{% for message in app.flashes('error') %}
    <div class="alert alert-danger">{{ message }}</div>
{% endfor %}

<h2>Changer de mot de passe</h2>
<form method="post">
    <input type="hidden" name="password_form" value="1">
    <label for="new_password">Nouveau mot de passe</label>
    <input type="password" id="new_password" name="new_password" required>

    <label for="confirm_password">Confirmer le mot de passe</label>
    <input type="password" id="confirm_password" name="confirm_password" required>

    <button type="submit">Mettre à jour le mot de passe</button>
</form>

<hr>

<h2>Authentification à deux facteurs (2FA)</h2>
{% if is2faEnabled %}
    <p>2FA est actuellement <strong>activée</strong>.</p>
    <img src="{{ qrCodeUrl }}" alt="QR Code">
    <form method="post">
        <input type="hidden" name="2fa_form" value="1">
        <button type="submit">Désactiver 2FA</button>
    </form>
{% else %}
    <p>2FA est actuellement <strong>désactivée</strong>.</p>
    <form method="post">
        <input type="hidden" name="2fa_form" value="1">
        <button type="submit">Activer 2FA</button>
    </form>
{% endif %}